"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const chatController_1 = require("../controllers/chatController");
const authMiddleware_1 = require("../middleware/authMiddleware");
const chatValidation_1 = require("../middleware/chatValidation");
const router = (0, express_1.Router)();
router.use(authMiddleware_1.validateJWT);
router.get('/department', authMiddleware_1.enforceDepartmentAccess, chatValidation_1.validateChatQuery, chatController_1.ChatController.getDepartmentChats);
router.get('/department/room', authMiddleware_1.enforceDepartmentAccess, chatController_1.ChatController.getOrCreateDepartmentChat);
router.get('/:chatId/messages', chatValidation_1.validateMessageQuery, chatController_1.ChatController.getChatMessages);
router.post('/:chatId/messages', chatValidation_1.validateSendMessage, chatController_1.ChatController.sendMessage);
router.put('/messages/:messageId', chatValidation_1.validateEditMessage, chatController_1.ChatController.editMessage);
router.delete('/messages/:messageId', chatValidation_1.validateMessageId, chatController_1.ChatController.deleteMessage);
router.post('/:chatId/read', chatValidation_1.validateMarkAsRead, chatController_1.ChatController.markMessagesAsRead);
router.get('/:chatId/participants', chatValidation_1.validateChatId, chatController_1.ChatController.getChatParticipants);
router.post('/status/online', chatController_1.ChatController.updateOnlineStatus);
exports.default = router;
